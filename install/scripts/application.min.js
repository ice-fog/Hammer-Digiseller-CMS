function init(){$('[data-toggle="tooltip"]').tooltip(),licenseHandler(),configHandler(),btnHandler()}function configHandler(){$("#config-form").bootstrapValidator({fields:{"db-host":{validators:{notEmpty:{message:"Не может быть пустым."}}},"db-name":{validators:{notEmpty:{message:"Не может быть пустым."}}},"db-user":{validators:{notEmpty:{message:"Не может быть пустым."}}},"site-title":{validators:{notEmpty:{message:"Не может быть пустым."},stringLength:{max:255,message:"Не более 255 символов"}}},"site-description":{validators:{notEmpty:{message:"Не может быть пустым."},stringLength:{max:160,message:"Не более 160 символов"}}},"site-login":{validators:{notEmpty:{message:"Не может быть пустым."}}},"site-pass":{validators:{notEmpty:{message:"Не может быть пустым."}}},"site-email":{validators:{notEmpty:{message:"Не может быть пустым."},emailAddress:{message:"Введите корректный адрес электронной почты."}}},"site-agent-id":{validators:{notEmpty:{message:"Не может быть пустым."},regexp:{regexp:/^\d+$/,message:"Только целое число"}}},"site-xml-id":{validators:{notEmpty:{message:"Не может быть пустым."},stringLength:{min:32,max:32,message:"Должен содержать 32 симвала"}}}}}).on("success.form.bv",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,$.post("/install/ajax",$(t.target).serialize()+"&action=install",function(t){"ok"==t?location.reload():bootbox.alert("<span class='text-danger'>Ошибка! Проверьте данные!</span>")})})}function licenseHandler(){$(document).on("change","#license",function(){$(this).is(":checked")?$(".license-btn-next").prop("disabled",!1):$(".license-btn-next").prop("disabled",!0)})}function btnHandler(){$(document).on("click",".license-btn-next",function(){$.post("/install/ajax",{action:"accept-license"},function(t){"ok"==t&&location.reload()})}),$(document).on("click",".system-btn-next",function(){$.post("/install/ajax",{action:"accept-system"},function(t){"ok"==t&&location.reload()})}),$(document).on("click",".files-btn-next",function(){$.post("/install/ajax",{action:"accept-files"},function(t){"ok"==t&&location.reload()})}),$(document).on("click",".btn-test-connect",function(){var t=$("#config-form").serialize();t+="&action=check-db-config",$.post("/install/ajax",t,function(t){"ok"==t?bootbox.alert("<span class='text-success'>Подключение к базе <b>"+$("#db-name").val()+"</b> установлено!</span>"):($("#config-form").submit(),bootbox.alert("<span class='text-danger'>Ошибка подключение к базе данных!</span>"))})})}